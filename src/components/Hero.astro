---
import HeroBackground from "./HeroBackground";
import SectionSpotlight from "./SectionSpotlight";
import ParallaxDashboard from "./ParallaxDashboard";
import SpotlightButton from "./SpotlightButton";
import { CONTENT } from "../constants/content";
import heroImage from "../assets/hero.avif";
import { getImage } from "astro:assets";
const { src: optimizedHeroImg } = await getImage({ src: heroImage, width: 1200, format: 'avif' });
---

<section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-void">
  <HeroBackground client:load />
  <SectionSpotlight client:load color="rgba(13, 148, 136, 0.15)" />
  
  {/* Reduced top padding on mobile to bring content up */}
  <div class="container mx-auto px-4 sm:px-6 md:px-12 lg:px-24 relative z-elevate pt-[clamp(8rem,12vw+4rem,10rem)] max-w-[1800px]">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 lg:gap-24 items-center">
      
      {/* Left Column: Monumental Typography */}
      <div class="text-center lg:text-left space-y-6 md:space-y-8 lg:space-y-12 relative z-100">


        {/* Responsive Typography: Adjusted for xs (360px and below) */}
        <h1 class="text-4xl xs:text-5xl sm:text-7xl md:text-8xl lg:text-[7rem] xl:text-[8rem] leading-[0.95] sm:leading-[0.85] tracking-tighter text-white font-bold animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-300 fill-mode-both mix-blend-screen break-words">
          {CONTENT.hero.title.line1} <br />
          <span class="italic text-brand-teal inline-block cursor-default pb-2">{CONTENT.hero.title.highlight}</span>
        </h1>

        <p data-speakable class="max-w-md xs:max-w-xl mx-auto lg:mx-0 text-sm xs:text-base md:text-xl text-zinc-300 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-500 fill-mode-both leading-relaxed font-sans tracking-wide opacity-90">
          {CONTENT.hero.description}
        </p>

        <div class="flex flex-col xs:flex-row items-center justify-center lg:justify-start gap-4 sm:gap-8 animate-in fade-in slide-in-from-bottom-16 duration-1000 delay-700 fill-mode-both">
          {/* CTA Group 1: Begin Calibration */}
          <div class="relative group">
            <SpotlightButton 
              client:load
              href={CONTENT.links.app} 
              target="_blank" 
              rel="noopener noreferrer" 
              className="w-auto px-8 xs:px-10 md:px-12 py-4 xs:py-5 md:py-6 bg-accent-yellow text-black font-bold text-base md:text-lg rounded-full shadow-[0_0_40px_rgba(252,211,77,0.3)] flex items-center justify-center gap-3 transition-all duration-500 touch-manipulation whitespace-nowrap"
            >
               <span class="relative z-10 flex items-center gap-2">
                  {CONTENT.hero.cta.primary}
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
               </span>
            </SpotlightButton>
          </div>

          {/* CTA Group 2: View Methodology */}
          <div class="relative group hidden xs:block">
             {/* Precision Brackets - Hidden until hover */}
             {/* PERFORMANCE: Check for reduced motion */}
             <div class="absolute -inset-2 z-sticky pointer-events-none opacity-0 group-hover:opacity-100 transition-all duration-500 scale-90 group-hover:scale-100 is-reduced:hidden">
               <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-zinc-400"></div>
               <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-zinc-400"></div>
               <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-zinc-400"></div>
               <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-zinc-400"></div>
             </div>
            <a href="#methodology" class="relative block w-full sm:w-auto px-6 xs:px-8 py-4 text-zinc-400 font-medium hover:text-white transition-all duration-300 text-center cursor-pointer tracking-widest text-xs md:text-sm uppercase font-mono touch-manipulation">
              {CONTENT.hero.cta.secondary}
            </a>
          </div>
          
          {/* Mobile-only secondary CTA (simpler) */}
           <div class="block xs:hidden text-center">
              <a href="#methodology" class="text-zinc-500 text-xs uppercase font-mono tracking-widest p-4 block active:text-white">
                  {CONTENT.hero.cta.secondary}
              </a>
           </div>
        </div>
      </div>

      {/* Right Column: Floating Constellation (Parallax Dashboard) */}
      <div class="block mt-12 sm:mt-0">
        <ParallaxDashboard client:load heroImage={optimizedHeroImg} />
      </div>

    </div>
  </div>
</section>

<style>
  .fill-mode-both {
    animation-fill-mode: both;
  }
</style>
