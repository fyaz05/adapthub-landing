---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar";
import Footer from "../components/Footer.astro";
import BackgroundPulse from "../components/BackgroundPulse";
import SpotlightButton from "../components/SpotlightButton";

---

<Layout 
  title="404 | Node Not Found" 
  description="System error. The requested cognitive pathway does not exist."
  noindex
>
  <Navbar client:load transition:persist />
  
  <main id="main-content" class="relative isolate flex flex-col justify-center flex-1 min-h-[100svh] pt-32 pb-24 overflow-hidden bg-void selection:bg-amber-500/30 selection:text-white">
    
    {/* ── Environment & Atmosphere ── */}
    <BackgroundPulse client:load />
    
    {/* Cinematic Film Grain */}
    <svg class="absolute inset-0 w-full h-full pointer-events-none z-[1] opacity-[0.035]" aria-hidden="true">
      <filter id="error-grain">
        <feTurbulence type="fractalNoise" baseFrequency="0.75" numOctaves="4" stitchTiles="stitch" />
        <feColorMatrix type="saturate" values="0" />
      </filter>
      <rect width="100%" height="100%" filter="url(#error-grain)" />
    </svg>

    {/* Diagnostic Radial Glow */}
    <div class="absolute top-1/2 left-0 -translate-y-1/2 w-[80%] max-w-3xl h-[600px] bg-amber-500/5 blur-[120px] rounded-full pointer-events-none mix-blend-screen" aria-hidden="true"></div>

    {/* ── The Wireframe Monolith (Deep Background) ── */}
    <div class="absolute top-1/2 right-[-5%] -translate-y-1/2 pointer-events-none select-none z-0" aria-hidden="true">
      {/* 3D Wireframe Offset Effect */}
      <div class="relative font-mono font-bold text-[clamp(12rem,30vw,35rem)] leading-none tracking-tighter">
        <span class="absolute inset-0 text-transparent [-webkit-text-stroke:1px_rgba(245,158,11,0.05)] translate-x-2 translate-y-2">404</span>
        <span class="absolute inset-0 text-transparent [-webkit-text-stroke:1px_rgba(255,255,255,0.02)] -translate-x-2 -translate-y-2">404</span>
        <span class="relative text-transparent [-webkit-text-stroke:1px_rgba(255,255,255,0.08)]">404</span>
      </div>
      
      {/* System Searching Laser */}
      <div class="absolute inset-0 z-10 overflow-hidden rounded-full mask-laser">
        <div class="w-full h-[2px] bg-amber-500 shadow-[0_0_20px_2px_rgba(245,158,11,0.5)] animate-scan"></div>
      </div>
    </div>

    {/* Ambient Architectural Grid Lines */}
    <div class="absolute inset-0 pointer-events-none flex justify-center z-[1] opacity-30 overflow-hidden" aria-hidden="true">
      <div class="w-full max-w-[1800px] h-full flex justify-between px-4 sm:px-6 md:px-12 lg:px-24">
        <div class="w-px h-full bg-gradient-to-b from-transparent via-white/[0.05] to-transparent"></div>
        <div class="w-px h-full bg-gradient-to-b from-transparent via-white/[0.05] to-transparent hidden lg:block ml-[41.666%]"></div>
        <div class="w-px h-full bg-gradient-to-b from-transparent via-amber-500/[0.05] to-transparent"></div>
      </div>
    </div>

    {/* ── Foreground Terminal ── */}
    <div class="container mx-auto px-4 sm:px-6 md:px-12 lg:px-24 relative z-10 max-w-[1800px]">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
        
        <div class="lg:col-span-6 xl:col-span-5 relative">
          
          {/* Active Terminal Bracket */}
          <div class="absolute -left-6 md:-left-12 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-amber-500/30 to-transparent hidden sm:block page-stagger" style="--i:0">
            <div class="absolute top-1/4 -left-[1px] w-[3px] h-12 bg-amber-500/80 shadow-[0_0_12px_rgba(245,158,11,0.6)]"></div>
          </div>

          <div class="page-stagger" style="--i:1">
            <div class="flex items-center gap-4 mb-6 md:mb-8">
              <span class="flex h-2 w-2 relative">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.8)]"></span>
              </span>
              <div class="h-px w-8 bg-amber-500/40" aria-hidden="true"></div>
              <span class="font-mono text-[10px] md:text-xs text-amber-500 uppercase tracking-[0.25em] select-none">
                Sys.Err // 0x404
              </span>
            </div>

            <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-[4.5rem] font-serif text-white tracking-tight leading-[1.05] mb-8">
              Lost in the <br />
              <span class="italic text-amber-500 block pb-2">Lattice.</span>
            </h1>
            
            <div class="space-y-6 text-zinc-400 font-sans text-base md:text-lg leading-[1.75] tracking-wide mb-12 max-w-md">
              <p>
                The cognitive pathway you are attempting to access does not exist. 
              </p>
              <div class="pl-4 border-l border-white/10 font-mono text-xs text-zinc-400 uppercase tracking-[0.1em] space-y-2 py-1">
                <div class="flex justify-between">
                  <span>Target Node:</span>
                  <span class="text-amber-500/80">Unreachable</span>
                </div>
                <div class="flex justify-between">
                  <span>Lattice ID:</span>
                  <span class="text-zinc-500">Undefined</span>
                </div>
              </div>
              <p>
                The node has either been decommissioned, re-routed, or the transmission URI is malformed.
              </p>
            </div>
            
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-8">
              
              {/* Primary Recovery Route */}
              <div class="relative group">
                <SpotlightButton 
                  client:load
                  href="/"
                  className="w-auto px-8 sm:px-10 py-3.5 sm:py-4 bg-accent-yellow text-black font-bold text-sm md:text-[0.9375rem] rounded-full shadow-[0_0_32px_rgba(252,211,77,0.2)] hover:shadow-[0_0_56px_rgba(252,211,77,0.35)] flex items-center justify-center gap-2.5 transition-all duration-500 touch-manipulation whitespace-nowrap"
                >
                  <div class="absolute inset-0 rounded-full border border-white/40 pointer-events-none mix-blend-overlay"></div>
                  <span class="relative z-10 flex items-center gap-2">
                    Re-route to Terminal
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 transition-transform duration-400 group-hover:translate-x-1 group-hover:-translate-y-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
                    </svg>
                  </span>
                </SpotlightButton>
              </div>

              {/* Secondary Back Action (JavaScript History API) */}
              <button
                id="trace-back-btn"
                class="group inline-flex items-center gap-3 py-3 font-mono text-[10px] md:text-xs text-zinc-400 uppercase tracking-[0.2em] hover:text-white active:scale-95 transition-all duration-300 outline-none focus-visible:text-amber-500"
              >
                <span class="block w-4 h-px bg-zinc-700 group-hover:w-8 group-hover:bg-amber-500 transition-all duration-500 ease-out" aria-hidden="true"></span>
                Trace Back
              </button>

            </div>
          </div>

        </div>
      </div>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  document.getElementById('trace-back-btn')?.addEventListener('click', () => history.back());
</script>
