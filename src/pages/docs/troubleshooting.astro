---
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar";
import AnnouncementBar from "../../components/AnnouncementBar";
import Footer from "../../components/Footer.astro";
import BackgroundPulse from "../../components/BackgroundPulse";
import { DOC_SECTIONS, DOC_FAQS } from "../../constants/docs-data";

const siteUrl = Astro.site || "https://adapthub.in";
const troubleshootingURL = new URL("/docs/troubleshooting/", siteUrl).href;
---

<Layout
  title="Troubleshooting | AdaptHub Docs"
  description="Common questions and diagnostic answers for the AdaptHub engine â€” calibration resets, hint penalties, mobile usage, and more."
  keywords={["adapthub troubleshooting", "adapthub faq", "adapthub help", "adapthub support"]}
>
  <script slot="head" type="application/ld+json" is:inline set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "@id": `${troubleshootingURL}#faq`,
    "url": troubleshootingURL,
    "mainEntity": DOC_FAQS.map((faq) => ({
      "@type": "Question",
      "name": faq.question,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": faq.answer,
      },
    })),
  })} />
  <AnnouncementBar client:load transition:persist />
  <Navbar client:load transition:persist />

  <main id="main-content" class="relative isolate pt-32 md:pt-40 pb-32 overflow-x-clip min-h-[100svh] bg-void selection:bg-brand-teal/30 selection:text-white scroll-smooth">

    <BackgroundPulse client:load />
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl h-[400px] bg-brand-teal/[0.04] blur-[100px] rounded-full pointer-events-none" aria-hidden="true"></div>

    <svg class="absolute inset-0 w-full h-full pointer-events-none z-[1] opacity-[0.03]" aria-hidden="true">
      <filter id="ts-grain">
        <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch" />
        <feColorMatrix type="saturate" values="0" />
      </filter>
      <rect width="100%" height="100%" filter="url(#ts-grain)" />
    </svg>

    <div class="container mx-auto px-4 sm:px-6 md:px-12 lg:px-24 relative z-10 max-w-[1800px] mt-12 md:mt-20">

      <a href="/docs" class="inline-flex items-center gap-3 font-mono text-[10px] text-zinc-400 uppercase tracking-[0.25em] hover:text-brand-teal active:scale-95 transition-all duration-300 mb-16 group outline-none focus-visible:text-brand-teal">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 transform group-hover:-translate-x-0.5 transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 5 5 12 12 19"></polyline>
        </svg>
        System Documentation
      </a>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-y-16 lg:gap-x-12 xl:gap-x-16 items-start relative">

        <div class="hidden lg:block absolute top-0 bottom-0 left-[25%] w-px bg-white/[0.04]" aria-hidden="true"></div>

        <aside class="lg:col-span-3 relative">
          <div class="lg:sticky lg:top-32 max-h-[calc(100vh-8rem)] overflow-y-auto custom-scrollbar pr-4">
            <div class="mb-8">
              <span class="font-mono text-[10px] text-zinc-400 uppercase tracking-[0.2em]">[ Directory ]</span>
            </div>
            <nav class="flex flex-col gap-1 relative">
              <div class="absolute -left-4 sm:-left-6 top-0 bottom-0 w-px bg-white/10 hidden sm:block"></div>
              {DOC_SECTIONS.map((s) => (
                <a href={`/docs/${s.slug}`} class="group flex items-baseline gap-4 py-2.5 outline-none focus-visible:text-brand-teal active:scale-[0.98] transition-transform duration-200">
                  <span class="font-mono text-[9px] text-zinc-500 group-hover:text-brand-teal uppercase tracking-[0.25em] shrink-0 transition-colors duration-300">{s.sysRef}</span>
                  <span class="font-sans text-sm md:text-base text-zinc-400 group-hover:text-white tracking-wide transition-colors duration-300">{s.title}</span>
                </a>
              ))}
              <div class="my-4 w-full h-px bg-white/5"></div>
              <a href="/docs/troubleshooting" class="group flex items-baseline gap-4 py-2.5 outline-none focus-visible:text-brand-teal active:scale-[0.98] transition-transform duration-200">
                <span class="font-mono text-[9px] text-amber-400 uppercase tracking-[0.25em] shrink-0">LOG.ERR</span>
                <span class="font-sans text-sm md:text-base text-white tracking-wide">Troubleshooting</span>
              </a>
            </nav>
          </div>
        </aside>

        <article class="lg:col-start-5 lg:col-span-8 xl:col-start-5 xl:col-span-7">

          <header class="mb-12 md:mb-16">
            <span class="font-mono text-[10px] text-amber-500 uppercase tracking-[0.25em] block mb-6">[ DIAGNOSTIC LOGS ]</span>
            <h1 class="text-[2.5rem] sm:text-5xl md:text-6xl font-serif text-white tracking-tighter leading-none mb-6">
              Troubleshooting
            </h1>
            <p class="text-zinc-400 font-sans text-lg leading-[1.7] max-w-[60ch] tracking-wide border-l-2 border-amber-500/40 pl-6">
              Common questions and operational answers for the AdaptHub engine.
            </p>
          </header>

          <div class="flex items-center gap-4 mb-14">
            <div class="h-px bg-white/10 flex-1"></div>
            <span class="font-mono text-[9px] text-amber-700 uppercase tracking-[0.25em]">[ FAQ ]</span>
            <div class="h-px bg-white/10 flex-1"></div>
          </div>

          <div class="border-t border-white/10">
            {DOC_FAQS.map((faq) => (
              <details class="faq-row group bg-transparent border-b border-white/10 hover:bg-white/[0.01] transition-colors cursor-pointer overflow-hidden">
                <summary class="py-6 md:py-8 font-serif text-lg md:text-xl lg:text-2xl text-zinc-300 group-hover:text-white list-none flex justify-between items-start outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-brand-teal/50 active:scale-[0.99] transition-all duration-200 pr-4">
                  <span class="leading-snug pr-8 tracking-tight">{faq.question}</span>
                  <span class="font-mono text-sm md:text-base text-zinc-500 group-hover:text-brand-teal shrink-0 relative w-8 h-8 flex items-center justify-center transition-colors">
                    <span class="absolute inset-0 flex items-center justify-center opacity-100 group-open:opacity-0 transition-opacity duration-300">[+]</span>
                    <span class="absolute inset-0 flex items-center justify-center opacity-0 group-open:opacity-100 transition-opacity duration-300">[-]</span>
                  </span>
                </summary>
                <div class="pb-8 text-zinc-400 leading-[1.8] font-sans text-base md:text-[1.0625rem] animate-in fade-in slide-in-from-top-4 duration-500 ease-out">
                  <div class="border-l border-brand-teal/30 pl-6 md:pl-8 py-1 max-w-[65ch]">
                    {faq.answer}
                  </div>
                </div>
              </details>
            ))}
          </div>

          {/* Core Issue Matrix */}
          <div class="space-y-6">
            <div class="border border-red-900/30 bg-red-950/10 rounded-xl p-6 sm:p-8 animate-in fade-in slide-in-from-bottom-4 duration-500 shadow-[0_4px_24px_rgba(220,38,38,0.05)] ease-out">
              <h3 class="font-serif text-xl sm:text-2xl text-red-400 tracking-tight mb-4">Core Issue Matrix</h3>
              <p class="text-zinc-400 leading-[1.8] font-sans text-base md:text-[1.0625rem]">
                If you're experiencing persistent issues not covered in the FAQs, please consult our Core Issue Matrix for advanced diagnostics.
              </p>
              <a href="/docs/core-issue-matrix" class="mt-6 inline-flex items-center gap-3 font-mono text-[10px] text-red-400 uppercase tracking-[0.2em] hover:text-red-300 active:scale-95 transition-all duration-300 outline-none focus-visible:text-red-300">
                View Core Issue Matrix
                <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 transform group-hover:translate-x-0.5 transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </a>
            </div>
          </div>

          <div class="mt-16 pt-8 border-t border-white/10 flex items-center justify-between">
            <a href="/docs" class="group flex items-center gap-3 font-mono text-[10px] text-zinc-400 uppercase tracking-[0.2em] hover:text-brand-teal active:scale-95 transition-all duration-300 outline-none focus-visible:text-brand-teal">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 transform group-hover:-translate-x-0.5 transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 5 5 12 12 19"></polyline></svg>
              All Docs
            </a>
            <a href="mailto:support@adapthub.in" class="group flex items-center gap-3 font-mono text-[10px] text-zinc-400 uppercase tracking-[0.2em] hover:text-brand-teal active:scale-95 transition-all duration-300 outline-none focus-visible:text-brand-teal">
              Contact Support
              <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 transform group-hover:translate-x-0.5 transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
            </a>
          </div>

        </article>
      </div>
    </div>
  </main>

  <Footer />
</Layout>

<style is:global>
  html {
    scroll-behavior: smooth;
  }
  @media (prefers-reduced-motion: reduce) {
    html { scroll-behavior: auto; }
    .faq-row * { transition: none !important; }
  }
</style>

<style>
  details > summary::-webkit-details-marker { display: none; }
  .custom-scrollbar::-webkit-scrollbar { width: 4px; }
  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(13,148,136,0.5); }
</style>
