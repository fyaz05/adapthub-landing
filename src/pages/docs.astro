---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar";
import AnnouncementBar from "../components/AnnouncementBar";
import Footer from "../components/Footer.astro";
import BackgroundPulse from "../components/BackgroundPulse";
import { resolvedContent as CONTENT } from "../utils/config";
import { DOC_SECTIONS } from "../constants/docs-data";

const siteUrl = Astro.site || "https://adapthub.in";
---

<Layout
  title={CONTENT.metadata.docs.title}
  description={CONTENT.metadata.docs.description}
  keywords={CONTENT.metadata.docs.keywords}
>
  <script slot="head" type="application/ld+json" is:inline set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebPage",
        "@id": `${siteUrl}docs/#webpage`,
        "url": `${siteUrl}docs`,
        "name": CONTENT.metadata.docs.title,
        "description": CONTENT.metadata.docs.description
      }
    ]
  })}></script>

  <AnnouncementBar client:load transition:persist />
  <Navbar client:load transition:persist />

  <main id="main-content" class="relative isolate pt-32 md:pt-40 pb-32 overflow-x-clip min-h-[100svh] bg-void selection:bg-brand-teal/30 selection:text-white">

    <BackgroundPulse client:load />

    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl h-[500px] bg-brand-teal/5 blur-[120px] rounded-full pointer-events-none" aria-hidden="true"></div>

    <svg class="absolute inset-0 w-full h-full pointer-events-none z-[1] opacity-[0.035]" aria-hidden="true">
      <filter id="docs-grain">
        <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch" />
        <feColorMatrix type="saturate" values="0" />
      </filter>
      <rect width="100%" height="100%" filter="url(#docs-grain)" />
    </svg>

    <div class="container mx-auto px-4 sm:px-6 md:px-12 lg:px-24 relative z-10 max-w-[1800px] mt-12 md:mt-20">

      {/* Header */}
      <header class="max-w-4xl mb-20 md:mb-28 page-stagger" style="--i:0">
        <h1 class="text-[3.5rem] sm:text-5xl md:text-6xl lg:text-7xl font-serif text-white tracking-tighter leading-none mb-8">
          AdaptHub <br class="hidden sm:block" />
          <span class="italic text-brand-teal block pb-2 sm:ml-8 mt-2 md:mt-4">Documentation.</span>
        </h1>
        <p class="text-zinc-400 font-sans text-lg md:text-xl max-w-2xl leading-[1.7] tracking-wide sm:pl-1">
          Step-by-step guides for using AdaptHub. Learn how adaptive difficulty, the AI Coach, and performance analytics work. Select a section to begin.
        </p>
      </header>

      {/* Docs Grid */}
      <div class="border-b border-white/10 pb-6 mb-8 flex items-center justify-between page-stagger" style="--i:1">
        <span class="font-mono text-[10px] text-zinc-400 uppercase tracking-[0.25em]">Module Index</span>
        <span class="font-mono text-[10px] text-zinc-500 uppercase tracking-[0.2em]">[ {DOC_SECTIONS.length} Sections ]</span>
      </div>

      <div class="w-full border border-white/[0.06] p-[1px] relative mb-16 page-stagger" style="--i:2">
        <div class="absolute top-0 left-0 w-3 h-3 border-t border-l border-brand-teal/40 pointer-events-none" aria-hidden="true"></div>
        <div class="absolute bottom-0 right-0 w-3 h-3 border-b border-r border-brand-teal/40 pointer-events-none" aria-hidden="true"></div>

        <div class="flex flex-col gap-[1px]">
          {DOC_SECTIONS.map((section, index) => (
            <a
              href={`/docs/${section.slug}`}
              class="doc-row group block relative bg-void py-10 md:py-12 pl-4 sm:pl-8 pr-6 overflow-hidden transition-colors duration-500 page-stagger"
              style={`--i:${3 + index}`}
            >
              {/* Active line */}
              <div class="absolute left-0 top-0 bottom-0 w-[2px] bg-brand-teal scale-y-0 group-hover:scale-y-100 transition-transform duration-500 origin-top pointer-events-none z-20" aria-hidden="true"></div>
              {/* Glow */}
              <div class="absolute inset-0 bg-[radial-gradient(circle_at_100%_50%,rgba(13,148,136,0.06)_0%,transparent_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none" aria-hidden="true"></div>

              <div class="relative z-10 flex flex-col md:flex-row md:items-center gap-4 md:gap-12">

                {/* Ref badge */}
                <div class="shrink-0 md:w-28">
                  <span class="font-mono text-[10px] text-brand-teal uppercase tracking-[0.25em] bg-brand-teal/5 border border-brand-teal/20 px-2 py-0.5">
                    REF {section.sysRef}
                  </span>
                </div>

                {/* Text */}
                <div class="flex-1 md:pl-0">
                  <h2 class="text-xl md:text-2xl font-serif text-zinc-200 group-hover:text-white leading-snug tracking-tight mb-2 transition-colors duration-300">
                    {section.title}
                  </h2>
                  <p class="text-zinc-400 group-hover:text-zinc-300 font-sans text-sm leading-relaxed transition-colors duration-300 max-w-2xl">
                    {section.description}
                  </p>
                </div>

                {/* Arrow */}
                <div class="shrink-0 w-9 h-9 rounded-full border border-white/10 flex items-center justify-center group-hover:border-brand-teal group-hover:bg-brand-teal/10 transition-all duration-500 opacity-0 group-hover:opacity-100 transform translate-x-3 group-hover:translate-x-0">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 text-brand-teal transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform duration-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="7" y1="17" x2="17" y2="7"></line>
                    <polyline points="7 7 17 7 17 17"></polyline>
                  </svg>
                </div>
              </div>
            </a>
          ))}

          {/* Troubleshooting row */}
          <a
            href="/docs/troubleshooting"
            class="doc-row group block relative bg-void py-10 md:py-12 pl-4 sm:pl-8 pr-6 overflow-hidden transition-colors duration-500 border-t border-white/[0.04] page-stagger"
            style={`--i:${3 + DOC_SECTIONS.length}`}
          >
            <div class="absolute left-0 top-0 bottom-0 w-[2px] bg-amber-500 scale-y-0 group-hover:scale-y-100 transition-transform duration-500 origin-top pointer-events-none z-20" aria-hidden="true"></div>
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_100%_50%,rgba(245,158,11,0.04)_0%,transparent_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none" aria-hidden="true"></div>

            <div class="relative z-10 flex flex-col md:flex-row md:items-center gap-4 md:gap-12">
              <div class="shrink-0 md:w-28">
                <span class="font-mono text-[10px] text-amber-500/80 uppercase tracking-[0.25em] bg-amber-500/5 border border-amber-500/20 px-2 py-0.5">
                  LOG.ERR
                </span>
              </div>
              <div class="flex-1">
                <h2 class="text-xl md:text-2xl font-serif text-zinc-200 group-hover:text-white leading-snug tracking-tight mb-2 transition-colors duration-300">
                  Troubleshooting
                </h2>
                <p class="text-zinc-400 group-hover:text-zinc-300 font-sans text-sm leading-relaxed transition-colors duration-300 max-w-2xl">
                  Common questions and diagnostic answers â€” calibration resets, hint penalties, mobile usage, Concept Library integration, and more.
                </p>
              </div>
              <div class="shrink-0 w-9 h-9 rounded-full border border-white/10 flex items-center justify-center group-hover:border-amber-500 group-hover:bg-amber-500/10 transition-all duration-500 opacity-0 group-hover:opacity-100 transform translate-x-3 group-hover:translate-x-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 text-amber-500 transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform duration-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <line x1="7" y1="17" x2="17" y2="7"></line>
                  <polyline points="7 7 17 7 17 17"></polyline>
                </svg>
              </div>
            </div>
          </a>

        </div>
      </div>

    </div>
  </main>

  <Footer />
</Layout>

<style>
  @media (prefers-reduced-motion: reduce) {
    .doc-row * { transition: none !important; }
  }
</style>
